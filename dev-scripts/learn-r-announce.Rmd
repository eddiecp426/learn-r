---
title: "learn-r Annoucement message"
author: "Jeff Oliver"
date: "`r format(Sys.time(), '%d %B, %Y')`"
output: html_document
---

```{r setup-schedule, echo = FALSE}
# TODO: Consider adding update to schedule.md as well

# Only this block should be edited
# See lesson-info.csv for lesson identifiers ('number' column)
schedule <- data.frame(dates = c("2019-06-04",
                                 "2019-06-11",
                                 "2019-06-18",
                                 "2019-06-25"),
                       lessons = c(-1, 4, 0, -1))
```

```{r prepare-data, echo = FALSE}
lesson.info <- read.csv(file = "lesson-info.csv", stringsAsFactors = FALSE)
schedule <- merge(x = schedule, y = lesson.info, 
                  by.x = "lessons", by.y = "number",
                  all.y = FALSE)
schedule$dates <- as.Date(schedule$dates)
schedule <- schedule[order(schedule$dates), ]
schedule$day <- format(schedule$dates, "%B %d")
```

### Announcement for learn-r workshops
Paste the following message into e-mail:

***

Would you mind forwarding this announcement to researchers in your department? Please let me know if you have any questions. Thanks in advance!

\-----

_All sessions will be 9-11 am on Tuesday in Room 200S of the [Weaver Science-Engineering Library](https://new.library.arizona.edu/visit/science)_. To get the most out of these workshops, participants should bring a laptop with [R and RStudio installed](https://jcoliver.github.io/learn-r/000-setup-instructions.html).

```{r print-schedule, echo = FALSE, results = "asis"}
# Keep track of whether an open lab has been encountered; only print blurb for 
# first instance
open.hit <- FALSE
for (i in 1:nrow(schedule)) {
  if (open.hit & schedule$lessons[i] == -1) {
    cat("+ ", schedule$day[i], ": **", schedule$title[i], "**.\n", sep = "")
  } else if (schedule$lessons[i] == 0) {
    cat("+ ", schedule$day[i], ": **", schedule$title[i], "**.\n", sep = "")
  } else {
    cat("+ ", schedule$day[i], ": **", schedule$title[i], "**: ", schedule$blurb[i], "\n", sep = "")
    if (schedule$lessons[i] == -1) {
      open.hit <- TRUE
    }
  }
}
```

Additional resources:

+ A tentative schedule of upcoming workshops is also available at: [https://jcoliver.github.io/learn-r/schedule](https://jcoliver.github.io/learn-r/schedule)
+ Want more help? Sign up for the UA Data Science Slack workspace at: [https://jcoliver.github.io/uadatascience-slack/](https://jcoliver.github.io/uadatascience-slack/)
+ Stay up to date with R workshops by signing up for the University of Arizona R Users mailing list at: [https://list.arizona.edu/sympa/subscribe/ruaz](https://list.arizona.edu/sympa/subscribe/ruaz)
+ Find even more data science resources by signing up for the Data Science Events list at: [https://list.arizona.edu/sympa/info/data7-events](https://list.arizona.edu/sympa/info/data7-events)

***

#### Attendance files set up:
```{r setup-files, echo = FALSE}
# Creating files with only header rows for tracking attendance
header.row <- "Last,First,E-mail,College,Department,Position"
for (i in 1:nrow(schedule)) {
  if (schedule$lessons[i] != 0) { # Don't set up a file if there is no lesson
    filename <- paste0(schedule$dates[i], "-main-", schedule$short.name[i], "-attendance.csv")
    filename <- paste0("../../learn-r-non-repo/admin/", filename)
    if (!file.exists(filename)) {
      file.create(filename)
      file.connection <- file(filename)
      writeLines(text = header.row, con = file.connection)
      close(file.connection)
      cat(filename, "\n")
    }
  }
}
```

